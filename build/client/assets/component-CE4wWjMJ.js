var re=t=>{throw TypeError(t)};var te=(t,e,s)=>e.has(t)||re("Cannot "+s);var i=(t,e,s)=>(te(t,e,"read from private field"),s?s.call(t):e.get(t)),w=(t,e,s)=>e.has(t)?re("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),g=(t,e,s,r)=>(te(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s),q=(t,e,s)=>(te(t,e,"access private method"),s);var Y=(t,e,s,r)=>({set _(n){g(t,e,n,s)},get _(){return i(t,e,r)}});import{w as Re}from"./with-props-5bye84R0.js";import{a as c,o as h,t as Ae,O as De}from"./chunk-KNED5TY2-D47WiFP7.js";import{c as U,a as ve,b as be,u as _e,S as we,h as xe,Q as Ne,n as k,m as ne,R as qe,d as Fe,e as ie,f as D,g as Ie,i as Te,j as ze,k as Be,o as ae,r as oe,l as He,p as ue,q as ce,s as Ke,W as $e,A as Le,t as Ve}from"./QueryClientProvider-BRILHyXB.js";import"./index-CvXxk9_X.js";function de(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Se(...t){return e=>{let s=!1;const r=t.map(n=>{const a=de(n,e);return!s&&typeof a=="function"&&(s=!0),a});if(s)return()=>{for(let n=0;n<r.length;n++){const a=r[n];typeof a=="function"?a():de(t[n],null)}}}}function We(...t){return c.useCallback(Se(...t),t)}function ke(t){const e=Ge(t),s=c.forwardRef((r,n)=>{const{children:a,...o}=r,u=c.Children.toArray(a),d=u.find(Je);if(d){const l=d.props.children,x=u.map(f=>f===d?c.Children.count(l)>1?c.Children.only(null):c.isValidElement(l)?l.props.children:null:f);return h.jsx(e,{...o,ref:n,children:c.isValidElement(l)?c.cloneElement(l,void 0,x):null})}return h.jsx(e,{...o,ref:n,children:a})});return s.displayName=`${t}.Slot`,s}var Pe=ke("Slot");function Ge(t){const e=c.forwardRef((s,r)=>{const{children:n,...a}=s;if(c.isValidElement(n)){const o=Xe(n),u=Ze(a,n.props);return n.type!==c.Fragment&&(u.ref=r?Se(r,o):o),c.cloneElement(n,u)}return c.Children.count(n)>1?c.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Ue=Symbol("radix.slottable");function Je(t){return c.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ue}function Ze(t,e){const s={...e};for(const r in e){const n=t[r],a=e[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...u)=>{a(...u),n(...u)}:n&&(s[r]=n):r==="style"?s[r]={...n,...a}:r==="className"&&(s[r]=[n,a].filter(Boolean).join(" "))}return{...t,...s}}function Xe(t){var r,n;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=e&&"isReactWarning"in e&&e.isReactWarning;return s?t.ref:(e=(n=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:n.get,s=e&&"isReactWarning"in e&&e.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}const Ye=ve("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function le({className:t,variant:e,size:s,asChild:r=!1,...n}){const a=r?Pe:"button";return h.jsx(a,{"data-slot":"button",className:U(Ye({variant:e,size:s,className:t})),...n})}function et(t,e,{checkForDefaultPrevented:s=!0}={}){return function(n){if(t==null||t(n),s===!1||!n.defaultPrevented)return e==null?void 0:e(n)}}function tt(t,e=[]){let s=[];function r(a,o){const u=c.createContext(o),d=s.length;s=[...s,o];const l=f=>{var M;const{scope:y,children:E,...P}=f,v=((M=y==null?void 0:y[t])==null?void 0:M[d])||u,O=c.useMemo(()=>P,Object.values(P));return h.jsx(v.Provider,{value:O,children:E})};l.displayName=a+"Provider";function x(f,y){var v;const E=((v=y==null?void 0:y[t])==null?void 0:v[d])||u,P=c.useContext(E);if(P)return P;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[l,x]}const n=()=>{const a=s.map(o=>c.createContext(o));return function(u){const d=(u==null?void 0:u[t])||a;return c.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return n.scopeName=t,[r,st(n,...e)]}function st(...t){const e=t[0];if(t.length===1)return e;const s=()=>{const r=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(a){const o=r.reduce((u,{useScope:d,scopeName:l})=>{const f=d(a)[`__scope${l}`];return{...u,...f}},{});return c.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return s.scopeName=e.scopeName,s}function Ce(t){const e=c.useRef(t);return c.useEffect(()=>{e.current=t}),c.useMemo(()=>(...s)=>{var r;return(r=e.current)==null?void 0:r.call(e,...s)},[])}function rt({prop:t,defaultProp:e,onChange:s=()=>{}}){const[r,n]=nt({defaultProp:e,onChange:s}),a=t!==void 0,o=a?t:r,u=Ce(s),d=c.useCallback(l=>{if(a){const f=typeof l=="function"?l(t):l;f!==t&&u(f)}else n(l)},[a,t,n,u]);return[o,d]}function nt({defaultProp:t,onChange:e}){const s=c.useState(t),[r]=s,n=c.useRef(r),a=Ce(e);return c.useEffect(()=>{n.current!==r&&(a(r),n.current=r)},[r,n,a]),s}function it(t){const e=c.useRef({value:t,previous:t});return c.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var at=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{};function ot(t){const[e,s]=c.useState(void 0);return at(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const a=n[0];let o,u;if("borderBoxSize"in a){const d=a.borderBoxSize,l=Array.isArray(d)?d[0]:d;o=l.inlineSize,u=l.blockSize}else o=t.offsetWidth,u=t.offsetHeight;s({width:o,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else s(void 0)},[t]),e}var ut=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Oe=ut.reduce((t,e)=>{const s=ke(`Primitive.${e}`),r=c.forwardRef((n,a)=>{const{asChild:o,...u}=n,d=o?s:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(d,{...u,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{}),se="Switch",[ct,qt]=tt(se),[dt,lt]=ct(se),Me=c.forwardRef((t,e)=>{const{__scopeSwitch:s,name:r,checked:n,defaultChecked:a,required:o,disabled:u,value:d="on",onCheckedChange:l,form:x,...f}=t,[y,E]=c.useState(null),P=We(e,m=>E(m)),v=c.useRef(!1),O=y?x||!!y.closest("form"):!0,[M=!1,B]=rt({prop:n,defaultProp:a,onChange:l});return h.jsxs(dt,{scope:s,checked:M,disabled:u,children:[h.jsx(Oe.button,{type:"button",role:"switch","aria-checked":M,"aria-required":o,"data-state":je(M),"data-disabled":u?"":void 0,disabled:u,value:d,...f,ref:P,onClick:et(t.onClick,m=>{B(C=>!C),O&&(v.current=m.isPropagationStopped(),v.current||m.stopPropagation())})}),O&&h.jsx(ht,{control:y,bubbles:!v.current,name:r,value:d,checked:M,required:o,disabled:u,form:x,style:{transform:"translateX(-100%)"}})]})});Me.displayName=se;var Ee="SwitchThumb",Qe=c.forwardRef((t,e)=>{const{__scopeSwitch:s,...r}=t,n=lt(Ee,s);return h.jsx(Oe.span,{"data-state":je(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:e})});Qe.displayName=Ee;var ht=t=>{const{control:e,checked:s,bubbles:r=!0,...n}=t,a=c.useRef(null),o=it(s),u=ot(e);return c.useEffect(()=>{const d=a.current,l=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(l,"checked").set;if(o!==s&&f){const y=new Event("click",{bubbles:r});f.call(d,s),d.dispatchEvent(y)}},[o,s,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:a,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function je(t){return t?"checked":"unchecked"}var ft=Me,pt=Qe;function gt({className:t,...e}){return h.jsx(ft,{"data-slot":"switch",className:U("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:h.jsx(pt,{"data-slot":"switch-thumb",className:U("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],mt=be("moon",yt);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],bt=be("sun",vt),wt=ve("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function xt({className:t,variant:e,asChild:s=!1,...r}){const n=s?Pe:"span";return h.jsx(n,{"data-slot":"badge",className:U(wt({variant:e}),t),...r})}function St(){var a;const t=_e(),e=Ae(),[s,r]=c.useState(()=>{const o=localStorage.getItem("darkMode");return o?JSON.parse(o):!1});c.useEffect(()=>{s?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[s]);const n=()=>{const o=!s;document.documentElement.classList.toggle("dark",o),r(o),localStorage.setItem("darkMode",JSON.stringify(o))};return c.useEffect(()=>{t.isAuthenticated&&e("/channel")},[t.isAuthenticated,e]),h.jsxs("div",{className:"flex flex-col bg-background h-screen",children:[h.jsxs("div",{className:"flex flex-row justify-start p-2 items-center w-full gap-6",children:[h.jsxs("div",{className:"flex flex-row items-center gap-2",children:[h.jsx(mt,{}),h.jsx(gt,{onClick:n}),h.jsx(bt,{})]}),h.jsxs(xt,{children:[h.jsx("div",{className:U("bg-red-400 size-4 rounded-full",{"bg-green-400":t.isAuthenticated})})," ",(a=t.user)==null?void 0:a.profile.name]}),t.isAuthenticated?h.jsx(le,{onClick:()=>t.signoutRedirect(),children:"Signout"}):h.jsx(le,{onClick:()=>t.signinRedirect(),children:"Signin"})]}),h.jsx(De,{})]})}var j,pe,kt=(pe=class extends we{constructor(e={}){super();w(this,j);this.config=e,g(this,j,new Map)}build(e,s,r){const n=s.queryKey,a=s.queryHash??xe(n,s);let o=this.get(a);return o||(o=new Ne({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(o)),o}add(e){i(this,j).has(e.queryHash)||(i(this,j).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,j).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,j).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){k.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,j).get(e)}getAll(){return[...i(this,j).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>ne(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>ne(e,r)):s}notify(e){k.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){k.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){k.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},j=new WeakMap,pe),R,S,K,A,F,ge,Pt=(ge=class extends qe{constructor(e){super();w(this,A);w(this,R);w(this,S);w(this,K);this.mutationId=e.mutationId,g(this,S,e.mutationCache),g(this,R,[]),this.state=e.state||Ct(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,R).includes(e)||(i(this,R).push(e),this.clearGcTimeout(),i(this,S).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){g(this,R,i(this,R).filter(s=>s!==e)),this.scheduleGc(),i(this,S).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,R).length||(this.state.status==="pending"?this.scheduleGc():i(this,S).remove(this))}continue(){var e;return((e=i(this,K))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,o,u,d,l,x,f,y,E,P,v,O,M,B,m,C,N,H,Z,G;const s=()=>{q(this,A,F).call(this,{type:"continue"})};g(this,K,Fe({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(b,X)=>{q(this,A,F).call(this,{type:"failed",failureCount:b,error:X})},onPause:()=>{q(this,A,F).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,S).canRun(this)}));const r=this.state.status==="pending",n=!i(this,K).canStart();try{if(r)s();else{q(this,A,F).call(this,{type:"pending",variables:e,isPaused:n}),await((o=(a=i(this,S).config).onMutate)==null?void 0:o.call(a,e,this));const X=await((d=(u=this.options).onMutate)==null?void 0:d.call(u,e));X!==this.state.context&&q(this,A,F).call(this,{type:"pending",context:X,variables:e,isPaused:n})}const b=await i(this,K).start();return await((x=(l=i(this,S).config).onSuccess)==null?void 0:x.call(l,b,e,this.state.context,this)),await((y=(f=this.options).onSuccess)==null?void 0:y.call(f,b,e,this.state.context)),await((P=(E=i(this,S).config).onSettled)==null?void 0:P.call(E,b,null,this.state.variables,this.state.context,this)),await((O=(v=this.options).onSettled)==null?void 0:O.call(v,b,null,e,this.state.context)),q(this,A,F).call(this,{type:"success",data:b}),b}catch(b){try{throw await((B=(M=i(this,S).config).onError)==null?void 0:B.call(M,b,e,this.state.context,this)),await((C=(m=this.options).onError)==null?void 0:C.call(m,b,e,this.state.context)),await((H=(N=i(this,S).config).onSettled)==null?void 0:H.call(N,void 0,b,this.state.variables,this.state.context,this)),await((G=(Z=this.options).onSettled)==null?void 0:G.call(Z,void 0,b,e,this.state.context)),b}finally{q(this,A,F).call(this,{type:"error",error:b})}}finally{i(this,S).runNext(this)}}},R=new WeakMap,S=new WeakMap,K=new WeakMap,A=new WeakSet,F=function(e){const s=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),k.batch(()=>{i(this,R).forEach(r=>{r.onMutationUpdate(e)}),i(this,S).notify({mutation:this,type:"updated",action:e})})},ge);function Ct(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _,Q,J,ye,Ot=(ye=class extends we{constructor(e={}){super();w(this,_);w(this,Q);w(this,J);this.config=e,g(this,_,new Set),g(this,Q,new Map),g(this,J,0)}build(e,s,r){const n=new Pt({mutationCache:this,mutationId:++Y(this,J)._,options:e.defaultMutationOptions(s),state:r});return this.add(n),n}add(e){i(this,_).add(e);const s=ee(e);if(typeof s=="string"){const r=i(this,Q).get(s);r?r.push(e):i(this,Q).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(i(this,_).delete(e)){const s=ee(e);if(typeof s=="string"){const r=i(this,Q).get(s);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&i(this,Q).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=ee(e);if(typeof s=="string"){const r=i(this,Q).get(s),n=r==null?void 0:r.find(a=>a.state.status==="pending");return!n||n===e}else return!0}runNext(e){var r;const s=ee(e);if(typeof s=="string"){const n=(r=i(this,Q).get(s))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){k.batch(()=>{i(this,_).forEach(e=>{this.notify({type:"removed",mutation:e})}),i(this,_).clear(),i(this,Q).clear()})}getAll(){return Array.from(i(this,_))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>ie(s,r))}findAll(e={}){return this.getAll().filter(s=>ie(e,s))}notify(e){k.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return k.batch(()=>Promise.all(e.map(s=>s.continue().catch(D))))}},_=new WeakMap,Q=new WeakMap,J=new WeakMap,ye);function ee(t){var e;return(e=t.options.scope)==null?void 0:e.id}function he(t){return{onFetch:(e,s)=>{var x,f,y,E,P;const r=e.options,n=(y=(f=(x=e.fetchOptions)==null?void 0:x.meta)==null?void 0:f.fetchMore)==null?void 0:y.direction,a=((E=e.state.data)==null?void 0:E.pages)||[],o=((P=e.state.data)==null?void 0:P.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const l=async()=>{let v=!1;const O=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},M=Ie(e.options,e.fetchOptions),B=async(m,C,N)=>{if(v)return Promise.reject();if(C==null&&m.pages.length)return Promise.resolve(m);const H={client:e.client,queryKey:e.queryKey,pageParam:C,direction:N?"backward":"forward",meta:e.options.meta};O(H);const Z=await M(H),{maxPages:G}=e.options,b=N?Te:ze;return{pages:b(m.pages,Z,G),pageParams:b(m.pageParams,C,G)}};if(n&&a.length){const m=n==="backward",C=m?Mt:fe,N={pages:a,pageParams:o},H=C(r,N);u=await B(N,H,m)}else{const m=t??a.length;do{const C=d===0?o[0]??r.initialPageParam:fe(r,u);if(d>0&&C==null)break;u=await B(u,C),d++}while(d<m)}return u};e.options.persister?e.fetchFn=()=>{var v,O;return(O=(v=e.options).persister)==null?void 0:O.call(v,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=l}}}function fe(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function Mt(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var p,I,T,$,L,z,V,W,me,Et=(me=class{constructor(t={}){w(this,p);w(this,I);w(this,T);w(this,$);w(this,L);w(this,z);w(this,V);w(this,W);g(this,p,t.queryCache||new kt),g(this,I,t.mutationCache||new Ot),g(this,T,t.defaultOptions||{}),g(this,$,new Map),g(this,L,new Map),g(this,z,0)}mount(){Y(this,z)._++,i(this,z)===1&&(g(this,V,Be.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,p).onFocus())})),g(this,W,ae.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,p).onOnline())})))}unmount(){var t,e;Y(this,z)._--,i(this,z)===0&&((t=i(this,V))==null||t.call(this),g(this,V,void 0),(e=i(this,W))==null||e.call(this),g(this,W,void 0))}isFetching(t){return i(this,p).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,I).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,p).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=i(this,p).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(oe(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return i(this,p).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),n=i(this,p).get(r.queryHash),a=n==null?void 0:n.state.data,o=He(e,a);if(o!==void 0)return i(this,p).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return k.batch(()=>i(this,p).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,p).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=i(this,p);k.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,p);return k.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=k.batch(()=>i(this,p).findAll(t).map(n=>n.cancel(s)));return Promise.all(r).then(D).catch(D)}invalidateQueries(t,e={}){return k.batch(()=>(i(this,p).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=k.batch(()=>i(this,p).findAll(t).filter(n=>!n.isDisabled()).map(n=>{let a=n.fetch(void 0,s);return s.throwOnError||(a=a.catch(D)),n.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(D)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=i(this,p).build(this,e);return s.isStaleByTime(oe(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(D).catch(D)}fetchInfiniteQuery(t){return t.behavior=he(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(D).catch(D)}ensureInfiniteQueryData(t){return t.behavior=he(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ae.isOnline()?i(this,I).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,p)}getMutationCache(){return i(this,I)}getDefaultOptions(){return i(this,T)}setDefaultOptions(t){g(this,T,t)}setQueryDefaults(t,e){i(this,$).set(ue(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,$).values()],s={};return e.forEach(r=>{ce(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){i(this,L).set(ue(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,L).values()],s={};return e.forEach(r=>{ce(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,T).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=xe(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ke&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,T).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,p).clear(),i(this,I).clear()}},p=new WeakMap,I=new WeakMap,T=new WeakMap,$=new WeakMap,L=new WeakMap,z=new WeakMap,V=new WeakMap,W=new WeakMap,me);const Qt={authority:"https://keycloak.hponthieu.org/realms/message",client_id:"message-front",redirect_uri:"https://message.hponthieu.org",automaticSilentRenew:!0,response_type:"code",scope:"openid profile email",userStore:new $e({store:window.localStorage}),onSigninCallback(t){t?window.history.replaceState({},"","/channel"):window.history.replaceState({},"","/")}},jt=new Et,Ft=Re(function(){return h.jsx(Le,{...Qt,children:h.jsx(Ve,{client:jt,children:h.jsx(St,{})})})});export{Ft as default};
